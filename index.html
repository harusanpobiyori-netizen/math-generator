<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c2{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c3{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c3 doc-content"><p class="c2"><span class="c0">&lt;!doctype html&gt;</span></p><p class="c2"><span class="c0">&lt;html lang=&quot;ja&quot;&gt;</span></p><p class="c2"><span class="c0">&lt;head&gt;</span></p><p class="c2"><span class="c0">&nbsp; &lt;meta charset=&quot;utf-8&quot; /&gt;</span></p><p class="c2"><span class="c0">&nbsp; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot; /&gt;</span></p><p class="c2"><span class="c0">&nbsp; &lt;title&gt;&#31639;&#25968;&#12503;&#12522;&#12531;&#12488;&#33258;&#21205;&#29983;&#25104;&lt;/title&gt;</span></p><p class="c2"><span class="c0">&nbsp; &lt;style&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; body { font-family: system-ui, -apple-system, &quot;Hiragino Kaku Gothic ProN&quot;, &quot;Noto Sans JP&quot;, sans-serif; margin: 16px; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; .row { display:flex; flex-wrap:wrap; gap:12px; align-items:center; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; .card { border:1px solid #ddd; border-radius:10px; padding:12px; margin-bottom:12px; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; label { margin-right: 8px; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; input[type=&quot;number&quot;], input[type=&quot;text&quot;] { width: 110px; padding: 6px; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; button { padding: 8px 12px; cursor: pointer; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; #sheet { margin-top: 16px; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; .sheet-head { display:flex; justify-content:space-between; gap:12px; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; .meta { font-size: 12px; color:#444; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; .grid { display:grid; grid-template-columns: repeat(4, 1fr); gap: 10px 18px; margin-top: 14px; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; .q { border-bottom: 1px dotted #bbb; padding-bottom: 4px; white-space: nowrap; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; .ans { color:#666; font-size: 12px; margin-top: 10px; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; .hidden { display:none; }</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; &nbsp; /* &#21360;&#21047;&#29992; */</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; @media print {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; body { margin: 0; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; .no-print { display:none !important; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; #sheet { padding: 18mm 15mm; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; .card { border:none; padding:0; margin:0; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; .grid { grid-template-columns: repeat(4, 1fr); gap: 10px 18px; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; .q { border-bottom: 1px solid #000; padding-bottom: 4px; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; &lt;/style&gt;</span></p><p class="c2"><span class="c0">&lt;/head&gt;</span></p><p class="c2"><span class="c0">&lt;body&gt;</span></p><p class="c2"><span class="c0">&nbsp; &lt;div class=&quot;card no-print&quot;&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;div class=&quot;row&quot;&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;strong&gt;&#31639;&#25968;&#12503;&#12522;&#12531;&#12488;&#29983;&#25104;&lt;/strong&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;span class=&quot;meta&quot;&gt;&#26465;&#20214;&rarr;seed&rarr;&#21839;&#38988;&#29983;&#25104;&rarr;&#21360;&#21047;&lt;/span&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;hr /&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;div class=&quot;row&quot;&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;span&gt;&#28436;&#31639;&#65306;&lt;/span&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;opAdd&quot; checked&gt;&#65291;&lt;/label&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;opSub&quot; checked&gt;&#65293;&lt;/label&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;opMul&quot;&gt;&times;&lt;/label&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;opDiv&quot;&gt;&divide;&lt;/label&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;div class=&quot;row&quot; style=&quot;margin-top:8px;&quot;&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;label&gt;&#25968;&#23383;&#19978;&#38480;&#65306;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;number&quot; id=&quot;maxNum&quot; value=&quot;100&quot; min=&quot;5&quot; max=&quot;99999&quot; /&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;/label&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;label&gt;&#21839;&#38988;&#25968;&#65306;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;number&quot; id=&quot;count&quot; value=&quot;20&quot; min=&quot;5&quot; max=&quot;200&quot; /&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;/label&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;label&gt;&#21015;&#25968;&#65306;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;number&quot; id=&quot;cols&quot; value=&quot;4&quot; min=&quot;1&quot; max=&quot;6&quot; /&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;/label&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;div class=&quot;row&quot; style=&quot;margin-top:8px;&quot;&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;noCarry&quot;&gt;&#65288;&#65291;&#65289;&#32368;&#12426;&#19978;&#12364;&#12426;&#12394;&#12375;&lt;/label&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;noBorrow&quot;&gt;&#65288;&#65293;&#65289;&#32368;&#12426;&#19979;&#12364;&#12426;&#12394;&#12375;&lt;/label&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;divExact&quot; checked&gt;&#65288;&divide;&#65289;&#21106;&#12426;&#20999;&#12428;&#12427;&#12398;&#12415;&lt;/label&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;div class=&quot;row&quot; style=&quot;margin-top:8px;&quot;&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;label&gt;seed&#65306;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;text&quot; id=&quot;seed&quot; placeholder=&quot;&#31354;&#12394;&#12425;&#33258;&#21205;&quot; /&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;/label&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;button id=&quot;btnNewSeed&quot;&gt;seed&#33258;&#21205;&lt;/button&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;button id=&quot;btnGen&quot;&gt;&#29983;&#25104;&lt;/button&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;button id=&quot;btnPrint&quot;&gt;&#21360;&#21047;/&#20445;&#23384;(PDF)&lt;/button&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;withAnswer&quot;&gt;&#35299;&#31572;&#12434;&#34920;&#31034;&lt;/label&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;div class=&quot;meta&quot; style=&quot;margin-top:6px;&quot;&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &#8251; &#21516;&#12376;&#26465;&#20214;&#65291;&#21516;&#12376;seed&#12391;&#21516;&#12376;&#12503;&#12522;&#12531;&#12488;&#12434;&#20877;&#29694;&#12391;&#12365;&#12414;&#12377;&#12290;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c2"><span class="c0">&nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; &lt;div id=&quot;sheet&quot; class=&quot;card&quot;&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;div class=&quot;sheet-head&quot;&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;div&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;&lt;strong&gt;&#31639;&#25968;&#12503;&#12522;&#12531;&#12488;&lt;/strong&gt;&lt;/div&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;meta&quot; id=&quot;metaLine&quot;&gt;&lt;/div&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;div class=&quot;meta&quot; style=&quot;text-align:right;&quot;&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &#27663;&#21517;&#65306;&#65343;&#65343;&#65343;&#65343;&#65343;&#65343;&#65343;&#65343;&#65343;&#65343;&#65343;&lt;br /&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &#26085;&#20184;&#65306;&#65343;&#65343;&#65343;&#65343;&#65343;&#65295;&#65343;&#65343;&#65343;&#65343;&#65343;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;div id=&quot;grid&quot; class=&quot;grid&quot;&gt;&lt;/div&gt;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &lt;div id=&quot;answers&quot; class=&quot;ans hidden&quot;&gt;&lt;/div&gt;</span></p><p class="c2"><span class="c0">&nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&lt;script&gt;</span></p><p class="c2"><span class="c0">/** &#25991;&#23383;&#21015;seed -&gt; 32bit&#25972;&#25968; */</span></p><p class="c2"><span class="c0">function xfnv1a(str) {</span></p><p class="c2"><span class="c0">&nbsp; let h = 2166136261 &gt;&gt;&gt; 0;</span></p><p class="c2"><span class="c0">&nbsp; for (let i=0; i&lt;str.length; i++) {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; h ^= str.charCodeAt(i);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; h = Math.imul(h, 16777619);</span></p><p class="c2"><span class="c0">&nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; return h &gt;&gt;&gt; 0;</span></p><p class="c2"><span class="c0">}</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">/** seed&#20184;&#12365;&#20081;&#25968; (mulberry32) */</span></p><p class="c2"><span class="c0">function mulberry32(a) {</span></p><p class="c2"><span class="c0">&nbsp; return function() {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; let t = a += 0x6D2B79F5;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; t = Math.imul(t ^ (t &gt;&gt;&gt; 15), t | 1);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; t ^= t + Math.imul(t ^ (t &gt;&gt;&gt; 7), t | 61);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; return ((t ^ (t &gt;&gt;&gt; 14)) &gt;&gt;&gt; 0) / 4294967296;</span></p><p class="c2"><span class="c0">&nbsp; }</span></p><p class="c2"><span class="c0">}</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">function randInt(rng, min, max) { // inclusive</span></p><p class="c2"><span class="c0">&nbsp; return Math.floor(rng() * (max - min + 1)) + min;</span></p><p class="c2"><span class="c0">}</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">function pick(rng, arr) {</span></p><p class="c2"><span class="c0">&nbsp; return arr[Math.floor(rng() * arr.length)];</span></p><p class="c2"><span class="c0">}</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">function getOps() {</span></p><p class="c2"><span class="c0">&nbsp; const ops = [];</span></p><p class="c2"><span class="c0">&nbsp; if (document.getElementById(&#39;opAdd&#39;).checked) ops.push(&#39;+&#39;);</span></p><p class="c2"><span class="c0">&nbsp; if (document.getElementById(&#39;opSub&#39;).checked) ops.push(&#39;-&#39;);</span></p><p class="c2"><span class="c0">&nbsp; if (document.getElementById(&#39;opMul&#39;).checked) ops.push(&#39;*&#39;);</span></p><p class="c2"><span class="c0">&nbsp; if (document.getElementById(&#39;opDiv&#39;).checked) ops.push(&#39;/&#39;);</span></p><p class="c2"><span class="c0">&nbsp; return ops;</span></p><p class="c2"><span class="c0">}</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">function hasCarry(a, b) {</span></p><p class="c2"><span class="c0">&nbsp; // 10&#36914;&#12391;1&#26689;&#12391;&#12418;a+b&gt;=10&#12394;&#12425;&#32368;&#12426;&#19978;&#12364;&#12426;</span></p><p class="c2"><span class="c0">&nbsp; while (a &gt; 0 || b &gt; 0) {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; if ((a % 10) + (b % 10) &gt;= 10) return true;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; a = Math.floor(a / 10);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; b = Math.floor(b / 10);</span></p><p class="c2"><span class="c0">&nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; return false;</span></p><p class="c2"><span class="c0">}</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">function hasBorrow(a, b) {</span></p><p class="c2"><span class="c0">&nbsp; // a-b &#12391;&#12393;&#12371;&#12363;&#12398;&#26689;&#12391;&#20511;&#12426;&#12364;&#24517;&#35201;</span></p><p class="c2"><span class="c0">&nbsp; let borrow = 0;</span></p><p class="c2"><span class="c0">&nbsp; while (a &gt; 0 || b &gt; 0) {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; const ad = (a % 10) - borrow;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; const bd = (b % 10);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; if (ad &lt; bd) return true;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; borrow = 0;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; a = Math.floor(a / 10);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; b = Math.floor(b / 10);</span></p><p class="c2"><span class="c0">&nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; return false;</span></p><p class="c2"><span class="c0">}</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">/** &#21839;&#38988;1&#21839;&#29983;&#25104;&#65288;&#26465;&#20214;&#12434;&#28288;&#12383;&#12377;&#12414;&#12391;&#12522;&#12488;&#12521;&#12452;&#65289; */</span></p><p class="c2"><span class="c0">function genOne(rng, op, maxNum, noCarry, noBorrow, divExact) {</span></p><p class="c2"><span class="c0">&nbsp; const MAX_TRY = 2000;</span></p><p class="c2"><span class="c0">&nbsp; for (let t=0; t&lt;MAX_TRY; t++) {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; let a, b, ans, disp;</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; &nbsp; if (op === &#39;+&#39;) {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; a = randInt(rng, 0, maxNum);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; b = randInt(rng, 0, maxNum);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; if (noCarry &amp;&amp; hasCarry(a, b)) continue;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; ans = a + b;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; disp = `${a} + ${b} =`;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; return { key: `+:${a},${b}`, disp, ans };</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; &nbsp; } else if (op === &#39;-&#39;) {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; a = randInt(rng, 0, maxNum);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; b = randInt(rng, 0, maxNum);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; // &#12510;&#12452;&#12490;&#12473;&#22238;&#36991;&#65288;&#23567;&#23398;&#26657;&#24819;&#23450;&#65289;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; if (b &gt; a) [a, b] = [b, a];</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; if (noBorrow &amp;&amp; hasBorrow(a, b)) continue;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; ans = a - b;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; disp = `${a} - ${b} =`;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; return { key: `-:${a},${b}`, disp, ans };</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; &nbsp; } else if (op === &#39;*&#39;) {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; // &#19978;&#38480;&#20869;&#12395;&#21454;&#12417;&#12388;&#12388;&#25499;&#12369;&#31639;&#12392;&#12375;&#12390;&#33258;&#28982;&#12395;&#12394;&#12427;&#12424;&#12358;&#31684;&#22258;&#35519;&#25972;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; // &#20363;&#65306;maxNum=100&#12394;&#12425; 0..12 &#31243;&#24230;&#12364;&#29694;&#23455;&#30340;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; const lim = Math.max(5, Math.floor(Math.sqrt(maxNum)));</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; a = randInt(rng, 0, lim);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; b = randInt(rng, 0, lim);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; ans = a * b;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; if (ans &gt; maxNum) continue;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; disp = `${a} &times; ${b} =`;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; return { key: `*:${a},${b}`, disp, ans };</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; &nbsp; } else if (op === &#39;/&#39;) {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; if (divExact) {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; // &#21106;&#12426;&#20999;&#12428;&#12427;&#65306;&#21830;q&#12392;&#21106;&#12427;&#25968;d&#12363;&#12425;&#20316;&#12427;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const d = randInt(rng, 1, Math.max(2, Math.min(12, maxNum)));</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const q = randInt(rng, 0, Math.max(2, Math.min(12, maxNum)));</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; a = d * q; // &#21106;&#12425;&#12428;&#12427;&#25968;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; b = d; &nbsp; &nbsp; // &#21106;&#12427;&#25968;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (a &gt; maxNum) continue;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; ans = q;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; disp = `${a} &divide; ${b} =`;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; return { key: `/:${a},${b}`, disp, ans };</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; } else {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; // &#20313;&#12426;&#12354;&#12426;&#21487;&#65306;&#12521;&#12531;&#12480;&#12512;&#29983;&#25104;&#65288;0&#38500;&#22806;&#65289;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; b = randInt(rng, 1, Math.max(2, Math.min(12, maxNum)));</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; a = randInt(rng, 0, maxNum);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; ans = (a / b);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; // &#34920;&#31034;&#19978;&#12399;&#23567;&#25968;&#12434;&#36991;&#12369;&#12383;&#12356;&#12394;&#12425;&#12289;&#12371;&#12371;&#12391;&#12300;&#21830;&#12392;&#20313;&#12426;&#12301;&#12395;&#22793;&#12360;&#12427;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const q = Math.floor(a / b);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const r = a % b;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; disp = `${a} &divide; ${b} = &#65288;&#21830; &nbsp;&#20313;&#12426; &nbsp;&#65289;`;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; return { key: `/%:${a},${b}`, disp, ans: `${q} &#12354;&#12414;&#12426; ${r}` };</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; // &#29983;&#25104;&#19981;&#33021;&#26178;</span></p><p class="c2"><span class="c0">&nbsp; return null;</span></p><p class="c2"><span class="c0">}</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">function normalizeKey(op, a, b) {</span></p><p class="c2"><span class="c0">&nbsp; // &#36275;&#12375;&#31639;&#12384;&#12369;&#38918;&#24207;&#12434;&#27491;&#35215;&#21270;&#12375;&#12390;&#37325;&#35079;&#12434;&#28187;&#12425;&#12377;</span></p><p class="c2"><span class="c0">&nbsp; if (op === &#39;+&#39;) {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; const x = Math.min(a, b), y = Math.max(a, b);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; return `+:${x},${y}`;</span></p><p class="c2"><span class="c0">&nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; return `${op}:${a},${b}`;</span></p><p class="c2"><span class="c0">}</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">function genSheet() {</span></p><p class="c2"><span class="c0">&nbsp; const ops = getOps();</span></p><p class="c2"><span class="c0">&nbsp; if (ops.length === 0) { alert(&#39;&#28436;&#31639;&#12434;1&#12388;&#20197;&#19978;&#36984;&#25246;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#39;); return; }</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; const maxNum = Number(document.getElementById(&#39;maxNum&#39;).value);</span></p><p class="c2"><span class="c0">&nbsp; const count &nbsp;= Number(document.getElementById(&#39;count&#39;).value);</span></p><p class="c2"><span class="c0">&nbsp; const cols &nbsp; = Number(document.getElementById(&#39;cols&#39;).value);</span></p><p class="c2"><span class="c0">&nbsp; const noCarry &nbsp;= document.getElementById(&#39;noCarry&#39;).checked;</span></p><p class="c2"><span class="c0">&nbsp; const noBorrow = document.getElementById(&#39;noBorrow&#39;).checked;</span></p><p class="c2"><span class="c0">&nbsp; const divExact = document.getElementById(&#39;divExact&#39;).checked;</span></p><p class="c2"><span class="c0">&nbsp; const withAnswer = document.getElementById(&#39;withAnswer&#39;).checked;</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; let seedStr = document.getElementById(&#39;seed&#39;).value.trim();</span></p><p class="c2"><span class="c0">&nbsp; if (!seedStr) {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; seedStr = String(Date.now());</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; document.getElementById(&#39;seed&#39;).value = seedStr;</span></p><p class="c2"><span class="c0">&nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; const rng = mulberry32(xfnv1a(seedStr));</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; const used = new Set();</span></p><p class="c2"><span class="c0">&nbsp; const qs = [];</span></p><p class="c2"><span class="c0">&nbsp; const answers = [];</span></p><p class="c2"><span class="c0">&nbsp; const MAX_TRY_TOTAL = 20000;</span></p><p class="c2"><span class="c0">&nbsp; let tries = 0;</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; while (qs.length &lt; count &amp;&amp; tries &lt; MAX_TRY_TOTAL) {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; tries++;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; const op = pick(rng, ops);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; const q = genOne(rng, op, maxNum, noCarry, noBorrow, divExact);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; if (!q) continue;</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; &nbsp; // &#27491;&#35215;&#21270;&#65288;&#36275;&#12375;&#31639;&#12398;&#38918;&#24207;&#36949;&#12356;&#12394;&#12393;&#65289;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; let key = q.key;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; if (op === &#39;+&#39;) {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; const parts = q.key.split(&#39;:&#39;)[1].split(&#39;,&#39;).map(Number);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; key = `+:${Math.min(parts[0],parts[1])},${Math.max(parts[0],parts[1])}`;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; if (used.has(key)) continue;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; used.add(key);</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; &nbsp; qs.push(q.disp);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; answers.push(q.ans);</span></p><p class="c2"><span class="c0">&nbsp; }</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; if (qs.length &lt; count) {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; alert(&#39;&#26465;&#20214;&#12364;&#21427;&#12375;&#12377;&#12366;&#12390;&#21313;&#20998;&#12394;&#21839;&#38988;&#25968;&#12434;&#29983;&#25104;&#12391;&#12365;&#12414;&#12379;&#12435;&#12391;&#12375;&#12383;&#12290;&#19978;&#38480;&#12420;&#21046;&#32004;&#12434;&#32233;&#12417;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;&#39;);</span></p><p class="c2"><span class="c0">&nbsp; }</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; // &#34920;&#31034;</span></p><p class="c2"><span class="c0">&nbsp; const grid = document.getElementById(&#39;grid&#39;);</span></p><p class="c2"><span class="c0">&nbsp; grid.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;</span></p><p class="c2"><span class="c0">&nbsp; grid.innerHTML = qs.map((s, i) =&gt; `&lt;div class=&quot;q&quot;&gt;${i+1}. ${escapeHtml(s)}&lt;/div&gt;`).join(&#39;&#39;);</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; const metaLine = document.getElementById(&#39;metaLine&#39;);</span></p><p class="c2"><span class="c0">&nbsp; metaLine.textContent =</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; `&#26465;&#20214;&#65306;&#28436;&#31639;=${ops.map(o=&gt;o===&#39;*&#39;?&#39;&times;&#39;:o===&#39;/&#39;?&#39;&divide;&#39;:o).join(&#39;,&#39;)} / &#19978;&#38480;=${maxNum} / &#21839;&#38988;&#25968;=${count} / seed=${seedStr}`;</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp; const ansBox = document.getElementById(&#39;answers&#39;);</span></p><p class="c2"><span class="c0">&nbsp; if (withAnswer) {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ansBox.classList.remove(&#39;hidden&#39;);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ansBox.innerHTML = `&lt;strong&gt;&#35299;&#31572;&lt;/strong&gt;&lt;br&gt;` + answers.map((a,i)=&gt; `${i+1}. ${a}`).join(&#39; &nbsp;&#39;);</span></p><p class="c2"><span class="c0">&nbsp; } else {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ansBox.classList.add(&#39;hidden&#39;);</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ansBox.innerHTML = &#39;&#39;;</span></p><p class="c2"><span class="c0">&nbsp; }</span></p><p class="c2"><span class="c0">}</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">function escapeHtml(s) {</span></p><p class="c2"><span class="c0">&nbsp; return String(s).replace(/[&amp;&lt;&gt;&quot;&#39;]/g, (c)=&gt;({</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &#39;&amp;&#39;:&#39;&amp;amp;&#39;,&#39;&lt;&#39;:&#39;&amp;lt;&#39;,&#39;&gt;&#39;:&#39;&amp;gt;&#39;,&#39;&quot;&#39;:&#39;&amp;quot;&#39;,&quot;&#39;&quot;:&#39;&amp;#39;&#39;</span></p><p class="c2"><span class="c0">&nbsp; }[c]));</span></p><p class="c2"><span class="c0">}</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">document.getElementById(&#39;btnGen&#39;).addEventListener(&#39;click&#39;, genSheet);</span></p><p class="c2"><span class="c0">document.getElementById(&#39;btnPrint&#39;).addEventListener(&#39;click&#39;, () =&gt; window.print());</span></p><p class="c2"><span class="c0">document.getElementById(&#39;btnNewSeed&#39;).addEventListener(&#39;click&#39;, () =&gt; {</span></p><p class="c2"><span class="c0">&nbsp; document.getElementById(&#39;seed&#39;).value = String(Date.now());</span></p><p class="c2"><span class="c0">});</span></p><p class="c2"><span class="c0">genSheet(); // &#21021;&#26399;&#34920;&#31034;</span></p><p class="c2"><span class="c0">&lt;/script&gt;</span></p><p class="c2"><span class="c0">&lt;/body&gt;</span></p><p class="c2"><span class="c0">&lt;/html&gt;</span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p></body></html>